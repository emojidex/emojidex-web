###
* emojidexReplace
*
* require: emojidex-client
*
* =LICENSE=
* Licensed under the emojidex Open License
* https://www.emojidex.com/emojidex/emojidex_open_license
*
* Copyright 2013 Genshin Souzou Kabushiki Kaisha
###

do ($ = jQuery, window, document) ->
  pluginName = "emojidexReplace"
  defaults =
    onComplete: undefined
    regexpUTF: /ðŸ˜§ðŸ¿|ðŸ˜™ðŸ¾|ðŸ˜ ðŸ¾|ðŸ˜¢ðŸ¾|ðŸ˜¥ðŸ¾|ðŸ˜©ðŸ¾|ðŸ˜¯ðŸ¾|ðŸ˜‚ðŸ¿|ðŸ˜ƒðŸ¿|ðŸ˜‰ðŸ¿|ðŸ˜‰ðŸ¾|ðŸ˜ŠðŸ¿|ðŸ˜‹ðŸ¿|ðŸ˜“ðŸ¿|ðŸ˜”ðŸ¿|ðŸ˜—ðŸ¿|ðŸ˜™ðŸ¿|ðŸ˜šðŸ¿|ðŸ˜›ðŸ¿|ðŸ˜ŸðŸ¿|ðŸ˜ ðŸ¿|ðŸ˜¢ðŸ¿|ðŸ˜¤ðŸ¿|ðŸ˜¥ðŸ¿|ðŸ˜¨ðŸ¿|ðŸ˜©ðŸ¿|ðŸ˜ªðŸ¿|ðŸ˜¬ðŸ¿|ðŸ˜­ðŸ¿|ðŸ˜¯ðŸ¿|ðŸ˜±ðŸ¿|ðŸ˜³ðŸ¿|ðŸ˜´ðŸ¿|ðŸ˜·ðŸ¿|ðŸ˜’ðŸ¿|ï¸9ï¸âƒ£|ðŸ˜ŒðŸ¿|ðŸ˜ðŸ¾|ðŸ˜ðŸ¿|ðŸ˜ðŸ¿|ðŸ˜„ðŸ¾|ðŸ˜„ðŸ¿|ðŸ˜†ðŸ¾|ðŸ˜†ðŸ¿|ðŸ˜ƒðŸ¾|ðŸ˜ŠðŸ¾|ðŸ˜‘ðŸ¾|ðŸ˜“ðŸ¾|ðŸ˜”ðŸ¾|ðŸ˜•ðŸ¾|ðŸ˜—ðŸ¾|ðŸ˜žðŸ¾|ðŸ˜ŸðŸ¾|ðŸ˜£ðŸ¾|ðŸ˜¤ðŸ¾|ðŸ˜«ðŸ¾|ðŸ˜‡ðŸ¿|ðŸ˜ŽðŸ¿|ðŸ˜ðŸ¿|ðŸ˜‘ðŸ¿|ðŸ˜•ðŸ¿|ðŸ˜–ðŸ¿|ðŸ˜žðŸ¿|ðŸ˜£ðŸ¿|ðŸ˜¦ðŸ¿|ðŸ˜›ðŸ¾|ðŸ˜«ðŸ¿|ðŸ˜®ðŸ¿|ðŸ˜°ðŸ¿|ðŸ˜²ðŸ¿|ðŸ˜µðŸ¿|ðŸ˜¶ðŸ¿|ðŸ˜…ðŸ¿|ðŸ˜˜ðŸ¿|ðŸ˜ðŸ¾|ðŸ˜ðŸ¿|ðŸ˜œðŸ¾|ðŸ˜œðŸ¿|ðŸ˜ðŸ¿|ðŸ˜ðŸ½|ðŸ˜ðŸ¾|ðŸ˜ðŸ¾|ðŸ˜ŒðŸ¾|ðŸ˜˜ðŸ¾|ðŸ˜’ðŸ¾|ðŸ˜·ðŸ¾|ðŸ˜¶ðŸ¾|ðŸ˜µðŸ¾|ðŸ˜´ðŸ¾|ðŸ˜³ðŸ¾|ðŸ˜²ðŸ¾|ðŸ˜±ðŸ¾|ðŸ˜°ðŸ¾|ðŸ˜®ðŸ¾|ðŸ˜­ðŸ¾|ðŸ˜¬ðŸ¾|ðŸ˜ªðŸ¾|ðŸ˜¨ðŸ¾|ðŸ˜§ðŸ¾|ðŸ˜¦ðŸ¾|ðŸ˜–ðŸ¾|ðŸ˜ŽðŸ¾|ðŸ˜ðŸ¾|ðŸ˜‡ðŸ¾|ðŸ˜‹ðŸ¾|ðŸ˜‚ðŸ¾|ðŸ˜…ðŸ¾|ï¸8ï¸âƒ£|ðŸ‡¨ðŸ‡³|ðŸ‡©ðŸ‡ª|ðŸ‡ªðŸ‡¸|ðŸ‡«ðŸ‡·|ðŸ‡¬ðŸ‡§|ðŸ‡®ðŸ‡¹|ðŸ‡¯ðŸ‡µ|ðŸ‡°ðŸ‡·|ðŸ‡·ðŸ‡º|ðŸ‡ºðŸ‡¸|ðŸ˜šðŸ¾|ï¸7ï¸âƒ£|ï¸1ï¸âƒ£|ï¸2ï¸âƒ£|ï¸3ï¸âƒ£|ï¸4ï¸âƒ£|ï¸5ï¸âƒ£|ï¸6ï¸âƒ£|ï¸0ï¸âƒ£|#ï¸âƒ£|â˜ºðŸ¾|â˜ºðŸ¿|ðŸ‡µ|ðŸ‡¶|ðŸ‡·|ðŸ‡¸|ðŸ‡¹|ðŸ‡º|ðŸ‡»|ðŸ‡¼|ðŸ‡½|ðŸ‡¾|ðŸ‡¿|ðŸ”Œ|ðŸŒ‘|ðŸŒ•|ðŸ•„|ðŸ•ƒ|ðŸ•‚|ðŸ•|ðŸ•€|ã€½ï¸|ðŸ––|ðŸˆ|ðŸˆ‚|ðŸˆš|ðŸˆ¯|ðŸˆ²|ðŸˆ³|ðŸˆ´|ðŸˆµ|ðŸˆ¶|ðŸˆ·|ðŸˆ¸|ðŸˆ¹|ðŸˆº|ðŸ‰|ðŸ‰‘|ðŸŒ€|ðŸŒ|ðŸŒ‚|ðŸŒƒ|ðŸŒ„|ðŸŒ…|ðŸŒ†|ðŸŒ‡|ðŸŒˆ|ðŸŒ‰|ðŸŒŠ|ðŸŒ‹|ðŸŒŒ|ðŸŒ|ðŸŒŽ|ðŸŒ|ðŸŒ|ðŸŒ’|ðŸ›…|ðŸŒ”|ðŸŒ–|ðŸ›„|ðŸŒ˜|ðŸŒ™|ðŸŒš|ðŸŒ›|ðŸŒœ|ðŸŒ|ðŸŒž|ðŸŒŸ|ðŸŒ |ðŸŒ¡|ðŸŒ¢|ðŸŒ£|ðŸŒ¤|ðŸŒ¥|ðŸŒ¦|ðŸŒ§|ðŸŒ¨|ðŸŒ©|ðŸŒª|ðŸŒ«|ðŸŒ¬|ðŸŒ°|ðŸŒ±|ðŸŒ²|ðŸŒ³|ðŸŒ´|ðŸŒµ|ðŸŒ¶|ðŸŒ·|ðŸŒ¸|ðŸŒ¹|ðŸŒº|ðŸŒ»|ðŸŒ¼|ðŸŒ½|ðŸŒ¾|ðŸŒ¿|ðŸ€|ðŸ|ðŸ‚|ðŸƒ|ðŸ„|ðŸ…|ðŸ†|ðŸ‡|ðŸˆ|ðŸ‰|ðŸŠ|ðŸ‹|ðŸŒ|ðŸ|ðŸŽ|ðŸ|ðŸ|ðŸ‘|ðŸ’|ðŸ“|ðŸ”|ðŸ•|ðŸ–|ðŸ—|ðŸ˜|ðŸ™|ðŸš|ðŸ›|ðŸœ|ðŸ|ðŸž|ðŸŸ|ðŸ |ðŸ¡|ðŸ¢|ðŸ£|ðŸ¤|ðŸ¥|ðŸ¦|ðŸ§|ðŸ¨|ðŸ©|ðŸª|ðŸ«|ðŸ¬|ðŸ­|ðŸ®|ðŸ¯|ðŸ°|ðŸ±|ðŸ²|ðŸ³|ðŸ´|ðŸµ|ðŸ¶|ðŸ·|ðŸ¸|ðŸ¹|ðŸº|ðŸ»|ðŸ¼|ðŸ½|ðŸŽ€|ðŸŽ|ðŸŽ‚|ðŸŽƒ|ðŸŽ„|ðŸŽ…|ðŸŽ†|ðŸŽ‡|ðŸŽˆ|ðŸŽ‰|ðŸŽŠ|ðŸŽ‹|ðŸŽŒ|ðŸŽ|ðŸŽŽ|ðŸŽ|ðŸŽ|ðŸŽ‘|ðŸŽ’|ðŸŽ“|ðŸŽ”|ðŸŽ•|ðŸŽ–|ðŸŽ—|ðŸŽ˜|ðŸŽ™|ðŸŽš|ðŸŽ›|ðŸŽœ|ðŸŽ|ðŸŽž|ðŸŽŸ|ðŸŽ |ðŸŽ¡|ðŸŽ¢|ðŸŽ£|ðŸŽ¤|ðŸŽ¥|ðŸŽ¦|ðŸŽ§|ðŸŽ¨|ðŸŽ©|ðŸŽª|ðŸŽ«|ðŸŽ¬|ðŸŽ­|ðŸŽ®|ðŸŽ¯|ðŸŽ°|ðŸŽ±|ðŸŽ²|ðŸŽ³|ðŸŽ´|ðŸŽµ|ðŸŽ¶|ðŸŽ·|ðŸŽ¸|ðŸŽ¹|ðŸŽº|ðŸŽ»|ðŸŽ¼|ðŸŽ½|ðŸŽ¾|ðŸŽ¿|ðŸ€|ðŸ|ðŸ‚|ðŸƒ|ðŸ„|ðŸ…|ðŸ†|ðŸ‡|ðŸˆ|ðŸ‰|ðŸŠ|ðŸ‹|ðŸŒ|ðŸ|ðŸŽ|ðŸ”|ðŸ•|ðŸ–|ðŸ—|ðŸ˜|ðŸ™|ðŸš|ðŸ›|ðŸœ|ðŸ|ðŸž|ðŸŸ|ðŸ |ðŸ¡|ðŸ¢|ðŸ£|ðŸ¤|ðŸ¥|ðŸ¦|ðŸ§|ðŸ¨|ðŸ©|ðŸª|ðŸ«|ðŸ¬|ðŸ­|ðŸ®|ðŸ¯|ðŸ°|ðŸ±|ðŸ²|ðŸ³|ðŸ´|ðŸµ|ðŸ¶|ðŸ·|ðŸ€|ðŸ|ðŸ‚|ðŸƒ|ðŸ„|ðŸ…|ðŸ†|ðŸ‡|ðŸˆ|ðŸ‰|ðŸŠ|ðŸ‹|ðŸŒ|ðŸ|ðŸŽ|ðŸ|ðŸ|ðŸ‘|ðŸ’|ðŸ“|ðŸ”|ðŸ•|ðŸ–|ðŸ—|ðŸ˜|ðŸ™|ðŸš|ðŸ›|ðŸœ|ðŸ|ðŸž|ðŸŸ|ðŸ |ðŸ¡|ðŸ¢|ðŸ£|ðŸ¤|ðŸ¥|ðŸ¦|ðŸ§|ðŸ¨|ðŸ©|ðŸª|ðŸ«|ðŸ¬|ðŸ­|ðŸ®|ðŸ¯|ðŸ°|ðŸ±|ðŸ²|ðŸ³|ðŸ´|ðŸµ|ðŸ¶|ðŸ·|ðŸ¸|ðŸ¹|ðŸº|ðŸ»|ðŸ¼|ðŸ½|ðŸ¾|ðŸ¿|ðŸ‘€|ðŸ‘|ðŸ‘‚|ðŸ‘ƒ|ðŸ—¢|ðŸ‘…|ðŸ‘†|ðŸ‘‡|ðŸ‘ˆ|ðŸ‘‰|ðŸ‘Š|ðŸ‘‹|ðŸ‘Œ|ðŸ‘|ðŸ‘Ž|ðŸ‘|ðŸ‘‘|ðŸ‘’|ðŸ‘“|ðŸ‘”|ðŸ‘•|ðŸ‘–|ðŸ‘—|ðŸ‘˜|ðŸ‘™|ðŸ‘š|ðŸ‘›|ðŸ‘œ|ðŸ‘|ðŸ‘ž|ðŸ‘Ÿ|ðŸ‘ |ðŸ‘¡|ðŸ‘¢|ðŸ‘£|ðŸ‘¦|ðŸ‘§|ðŸ‘¨|ðŸ‘©|ðŸ‘ª|ðŸ‘«|ðŸ‘¬|ðŸ‘­|ðŸ‘®|ðŸ‘¯|ðŸ‘±|ðŸ‘²|ðŸ‘´|ðŸ‘µ|ðŸ‘¶|ðŸ‘¸|ðŸ‘»|ðŸ‘¼|ðŸ‘½|ðŸ‘¾|ðŸ‘¿|ðŸ’€|ðŸ’|ðŸ’‚|ðŸ’ƒ|ðŸ’„|ðŸ’…|ðŸ’†|ðŸ’‡|ðŸ’ˆ|ðŸ’‰|ðŸ’Š|ðŸ’‹|ðŸ’|ðŸ’Ž|ðŸ’|ðŸ’|ðŸ’˜|ðŸ’¡|ðŸ’¢|ðŸ’£|ðŸ’¤|ðŸ’¥|ðŸ’§|ðŸ’¨|ðŸ’©|ðŸ’ª|ðŸ’«|ðŸ’¯|ðŸ’°|ðŸ’²|ðŸ’³|ðŸ’´|ðŸ’µ|ðŸ’¶|ðŸ’·|ðŸ’¹|ðŸ’º|ðŸ’»|ðŸ’¼|ðŸ’½|ðŸ’¾|ðŸ’¿|ðŸ“€|ðŸ“|ðŸ“…|ðŸ“†|ðŸ“‡|ðŸ“ˆ|ðŸ“‹|ðŸ“Œ|ðŸ“Ž|ðŸ“’|ðŸ““|ðŸ“”|ðŸ“–|ðŸ“˜|ðŸ“™|ðŸ“š|ðŸ“›|ðŸ“œ|ðŸ“|ðŸ“Ÿ|ðŸ“ |ðŸ“¡|ðŸ“¢|ðŸ“£|ðŸ“¦|ðŸ“§|ðŸ“©|ðŸ“«|ðŸ“­|ðŸ“®|ðŸ“¯|ðŸ“°|ðŸ“±|ðŸ“²|ðŸ“·|ðŸ“¹|ðŸ“º|ðŸ“»|ðŸ“¼|ðŸ”€|ðŸ”|ðŸ”„|ðŸ”‡|ðŸ”ˆ|ðŸ”‰|ðŸ”‹|ðŸƒ|ðŸ”|ðŸ”Ž|ðŸ”|ðŸ”‘|ðŸ”’|ðŸ”“|ðŸ””|ðŸ”–|ðŸ”—|ðŸ”™|ðŸ”š|ðŸ”›|ðŸ”œ|ðŸ”|ðŸ”¡|ðŸ”¢|ðŸ”£|ðŸ”¤|ðŸ”¥|ðŸ”¦|ðŸ”§|ðŸ”¨|ðŸ”ª|ðŸ”«|ðŸ”­|ðŸ”°|ðŸ”±|ðŸ”²|ðŸ”³|ðŸ”µ|ðŸ”¶|ðŸ”·|ðŸ”¸|ðŸ”¹|ðŸ”º|ðŸ”»|ðŸ”½|ðŸ•…|ðŸ•|ðŸ•‘|ðŸ•’|ðŸ•“|ðŸ•”|ðŸ••|ðŸ•–|ðŸ•—|ðŸ•˜|ðŸ•™|ðŸ•š|ðŸ•›|ðŸ•œ|ðŸ•|ðŸ•ž|ðŸ•Ÿ|ðŸ• |ðŸ•¡|ðŸ•¢|ðŸ•£|ðŸ•¤|ðŸ•«|ðŸ•¬|ðŸ•¯|ðŸ•±|ðŸ•³|ðŸ•·|ðŸ•¹|ðŸ•»|ðŸ•¼|ðŸ•½|ðŸ•¾|ðŸ•¿|ðŸ–€|ðŸ–|ðŸ–„|ðŸ–†|ðŸ–Š|ðŸ–‹|ðŸ–Ž|ðŸ–|ðŸ–’|ðŸ–”|ðŸ–§|ðŸ–¨|ðŸ–ª|ðŸ–«|ðŸ–¬|ðŸ–²|ðŸ–´|ðŸ–µ|ðŸ–¶|ðŸ–·|ðŸ–º|ðŸ–¿|ðŸ—€|ðŸ—€|ðŸ—ƒ|ðŸ—„|ðŸ—…|ðŸ—ˆ|ðŸ—‰|ðŸ—Š|ðŸ—Œ|ðŸ—|ðŸ—Ž|ðŸ—|ðŸ—|ðŸ—‘|ðŸ—•|ðŸ—–|ðŸ——|ðŸ—™|ðŸ—š|ðŸ—›|ðŸ—œ|ðŸ—|ðŸ—ž|ðŸ—Ÿ|ðŸ—£|ðŸ—¤|ðŸ—¥|ðŸ—§|ðŸ—¨|ðŸ—©|ðŸ—ª|ðŸ—«|ðŸ—¬|ðŸ—­|ðŸ—¯|ðŸ—¯|ðŸ—±|ðŸ—³|ðŸ—µ|ðŸ—¶|ðŸ—·|ðŸ—¸|ðŸ—¹|ðŸ—º|ðŸ—»|ðŸ—¼|ðŸ—¾|ðŸ—¿|ðŸ˜€|ðŸ˜|ðŸ˜‚|ðŸ˜ƒ|ðŸ˜„|ðŸ˜…|ðŸ˜†|ðŸ˜‡|ðŸ˜ˆ|ðŸ˜‰|ðŸ˜Š|ðŸ˜‹|ðŸ˜Œ|ðŸ˜|ðŸ˜Ž|ðŸ˜|ðŸ˜‘|ðŸ˜’|ðŸ˜“|ðŸ˜”|ðŸ˜•|ðŸ˜–|ðŸ˜—|ðŸ˜œ|ðŸ˜|ðŸ˜ž|ðŸ˜Ÿ|ðŸ˜ |ðŸ˜¡|ðŸ˜¢|ðŸ˜£|ðŸ˜¤|ðŸ˜¦|ðŸ˜§|ðŸ˜¨|ðŸ˜©|ðŸ˜ª|ðŸ˜«|ðŸ˜¬|ðŸ˜­|ðŸ˜¯|ðŸ˜°|ðŸ˜±|ðŸ˜²|ðŸ˜³|ðŸ˜´|ðŸ˜µ|ðŸ˜¶|ðŸ˜·|ðŸ˜¹|ðŸ˜¼|ðŸ™Š|ðŸš‚|ðŸš„|ðŸš…|ðŸš”|ðŸš•|ðŸš˜|ðŸš›|ðŸšž|ðŸšŸ|ðŸš |ðŸš¡|ðŸš§|ðŸš©|ðŸšª|ðŸš¬|ðŸš®|ðŸš±|ðŸš´|ðŸš¶|ðŸš¹|ðŸšº|ðŸš»|ðŸš½|ðŸš¾|ðŸš¿|ðŸ›€|ðŸ›|ðŸ…¿|ðŸ†’|ðŸ†“|ðŸ†”|ðŸ†•|ðŸ†–|ðŸ†—|ðŸ†˜|ðŸ†™|ðŸ†š|ðŸ‡´|ðŸ›ƒ|ðŸ›‚|ðŸš¼|ðŸš¸|ðŸš·|ðŸšµ|ðŸš³|âŒšï¸|ðŸš²|ðŸš°|ðŸš¯|â“‚ï¸|ðŸš­|ðŸš«|ðŸš¨|ðŸš¦|ðŸš¥|ðŸš¤|ðŸš£|ðŸš¢|ðŸš|ðŸšœ|ðŸšš|ðŸš™|ðŸš—|ðŸš–|ðŸš“|ðŸš’|ðŸš‘|ðŸš|ðŸš|ðŸšŽ|ðŸš|ðŸšŒ|ðŸš‹|ðŸšŠ|ðŸš‰|ðŸšˆ|ðŸš‡|ðŸš†|ðŸšƒ|ðŸš|ðŸš€|ðŸ™|ðŸ™Ž|ðŸ™|ðŸ™Œ|ðŸ™‹|ðŸ™‰|ðŸ™ˆ|ðŸ™‡|ðŸ™†|ðŸ™…|ðŸ™€|ðŸ˜¿|ðŸ˜¾|ðŸ€„|ðŸ…°|ðŸ…±|ðŸ…¾|ðŸ†Ž|ðŸ†‘|ðŸ‡¦|ðŸ‡§|ðŸ‡¨|ðŸ‡©|ðŸ‡ª|ðŸ‡«|ðŸ‡¬|ðŸ‡­|ðŸ‡®|ðŸ‡¯|ðŸ‡°|ðŸ‡±|ðŸ‡²|ðŸ‡³|ðŸ‘|ðŸ‘¤|ðŸ‘¥|ðŸ‘°|ðŸ‘³|ðŸ‘·|ðŸ‘¹|ðŸ‘º|ðŸ’Œ|ðŸ’‘|ðŸ’’|ðŸ’“|ðŸ’”|ðŸ’•|ðŸ’–|ðŸ’—|ðŸ’™|ðŸ’š|ðŸ’›|ðŸ’œ|ðŸ’|ðŸ’ž|ðŸ’Ÿ|ðŸ’¦|ðŸ’¬|ðŸ’­|ðŸ’®|ðŸ’±|ðŸ’¸|ðŸ“‚|ðŸ“ƒ|ðŸ“„|ðŸ“‰|ðŸ“Š|ðŸ“|ðŸ“|ðŸ“|ðŸ“‘|ðŸ“•|ðŸ“—|ðŸ“ž|ðŸ“¤|ðŸ“¥|ðŸ“¨|ðŸ“ª|ðŸ“¬|ðŸ“³|ðŸ“´|ðŸ“µ|ðŸ“¶|ðŸ“¸|ðŸ“½|ðŸ“¾|ðŸ”‚|ðŸ”ƒ|ðŸ”…|ðŸ”†|ðŸ”Š|ðŸ”|ðŸ”•|ðŸ”˜|ðŸ”ž|ðŸ”Ÿ|ðŸ” |ðŸ”©|ðŸ”¬|ðŸ”®|ðŸ”¯|ðŸ”´|ðŸ”¼|ðŸ”¾|ðŸ”¿|ðŸ•„|ðŸ•†|ðŸ•‡|ðŸ•ˆ|ðŸ•‰|ðŸ•Š|ðŸ•¥|ðŸ•¦|ðŸ•§|ðŸ•¨|ðŸ•©|ðŸ•ª|ðŸ•­|ðŸ•°|ðŸ•²|ðŸ•´|ðŸ•µ|ðŸ•¶|ðŸ•¸|ðŸ–‚|ðŸ–ƒ|ðŸ–…|ðŸ–‡|ðŸ–ˆ|ðŸ–‰|ðŸ–Œ|ðŸ–|ðŸ–|ðŸ–‘|ðŸ–“|ðŸ–—|ðŸ–˜|ðŸ–™|ðŸ–š|ðŸ–›|ðŸ–œ|ðŸ–|ðŸ–ž|ðŸ–Ÿ|ðŸ– |ðŸ–¡|ðŸ–¢|ðŸ–£|ðŸ–¥|ðŸ–¦|ðŸ–©|ðŸ–­|ðŸ–®|ðŸ–¯|ðŸ–°|ðŸ–±|ðŸ–³|ðŸ–¸|ðŸ–¹|ðŸ–»|ðŸ–¼|ðŸ–½|ðŸ–¾|ðŸ—‚|ðŸ—†|ðŸ—‡|ðŸ—‹|ðŸ—’|ðŸ—“|ðŸ—”|ðŸ—˜|ðŸ— |ðŸ—¡|ðŸ—¦|ðŸ—°|ðŸ—²|ðŸ—´|ðŸ—½|ðŸ˜|ðŸ˜˜|ðŸ˜™|ðŸ˜š|ðŸ˜›|ðŸ˜¥|ðŸ˜®|ðŸ˜¸|ðŸ˜º|ðŸ˜»|ðŸ˜½|â˜¯|â­•|â¬œ|â¬›|â¤µ|â¤´|âž¿|âž—|âž–|âŒ|âœ´|âœ³|âœ–|âœ”|âœ’|âœ|âœ‚|â›ª|â›„|âš¾|âš½|âš¡|âš |â™¥|â™£|â™ |â™“|â™Ž|â™|â™Œ|â™‹|â™Š|â™‰|â™ˆ|â˜º|â˜•|â˜‘|â˜Ž|â˜|â˜€|â—¼|â—»|â–«|â–ª|â³|â¬|âŒ›|â†ª|â†™|â†˜|â†—|â†–|â†”|â„¢|â˜¾|â˜½|Â©|Â®|â€¼|â‰|â„¹|â†•|â©|âª|â«|â°|â–¶|â—€|â˜”|â˜|â™|â™|â™‘|â™’|â™¦|â™¨|â™»|â™¿|âš“|âšª|âš«|â›…|â›Ž|â›”|â›µ|âœˆ|âœŠ|âœ‹|âœ¡|âœ¨|â„|â‡|âŽ|â“|â”|â•|â—|â¤|âž•|âž¡|âž°|â¬…|â¬†|â¬‡|ã€°|ãŠ—|ãŠ™|â†©|â—½|â—¾|âœŒ|âœ‰|âœ…|â›½|â›º|â›³|â›²|â˜„|â˜…|â˜ˆ|â˜Š|â˜‹|â˜Œ|â˜|â˜–|â˜—|â˜™|â˜š|â˜›|â˜ |â˜¡|â˜¢|â˜£|â˜¤|â˜¥|â˜¦|â˜§|â˜¨|â˜©|â˜ª|â˜«|â˜¬|â˜­|â˜®|â­|â˜°|â˜±|â˜²|â˜³|â˜´|â˜µ|â˜¶|â˜·|â˜¸|â˜¹|â˜»|â˜¼|â˜¿|â™€|â™|â™‚|â™ƒ|â™„|â™…|â™†|â™‡|â™”|â™•|â™–|â™—|â™˜|â™™|â™š|â™›|â™œ|â™|â™ž|â™Ÿ|â™©|â™¬|â™­|â™®|â™¯|â™°|â™±|â™³|â™´|â™µ|â™¶|â™·|â™¸|â™¹|â™º|â™¼|â™½|âš€|âš|âš‚|âšƒ|âš„|âš…|âš†|âš‡|âšˆ|âš‰|âšŠ|âš‹|âšŒ|âš|âšŽ|âš|âš’|âš”|âš•|âš–|âš—|âš˜|âš™|âš›|âšœ|âš|âšž|âšŸ|âš¢|âš£|âš¤|âš¥|âš¦|âš§|âš¨|âš©|âš­|âš®|âš¯|âš°|âš±|âš²|âš³|âš´|âšµ|âš¶|âš·|âš¸|âš¹|âšº|âš»|âš¼|â›€|â›|â›‚|â›ƒ|â›‡|â›‰|â›Š|â›‹|â›Œ|â›|â›|â›|â›‘|â›’|â›“|â›•|â›–|â›—|â›˜|â›™|â›š|â››|â›œ|â›|â›ž|â›Ÿ|â› |â›¡|â›£|â›¤|â›§|â›©|â›¬|â›­|â›®|â›¯|â›±|â›¶|â›¸|â›¹|â›¼|â›¿/g
    useUserEmoji: false
    userNames: [
      'emoji'
      'emojidex'
    ]

  class Plugin
    constructor: (@element, options) ->
      @element = $ @element
      @options = $.extend {}, defaults, options
      @_defaults = defaults
      @_name = pluginName

      @ec = new EmojidexClient

      if @ec.Data.storage.get('emojidex.regexpUTF') and @ec.Data.storage.get('emojidex.utfEmojiData')
        @options.regexpUTF = RegExp @ec.Data.storage.get('emojidex.regexpUTF'), 'g'
        @options.utfEmojiData = @ec.Data.storage.get 'emojidex.utfEmojiData'
        @replace()
      else
        $.ajax
          url: @ec.api_url + 'moji_codes'
          dataType: 'json'
          success: (response) =>
            console.dir response

            @ec.Data.storage.set 'emojidex.utfEmojiData', response.moji_index
            @options.utfEmojiData = response.moji_index

            regexp = response.moji_array.join('|')
            @ec.Data.storage.set 'emojidex.regexpUTF', regexp
            @options.regexpUTF = RegExp regexp, 'g'
            @replace()

    replace: ->
      @replacer = if @options.useUserEmoji then new ReplacerUser @ else new ReplacerSearch @
      @replacer.loadEmoji()

  $.fn[pluginName] = (options) ->
    @each ->
      unless $.data(this, "plugin_" + pluginName)
        $.data this, "plugin_" + pluginName, new Plugin(this, options)
